var articlesApp=function(){function e(){let e=window.location.origin+"/api/articles",t=new XMLHttpRequest;t.open("GET",e),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response).articles,i="",d="";for(let e=0;e<n.length;e++)d+=`<tr>\n        <td>\n          <a href="#view-${n[e]._id}">${n[e].title}, ${n[e].slug}</a>\n        </td>\n        <td>${n[e].body}</td>\n        <td>${n[e].keywords}</td>\n        <td>${n[e].description}</td>\n        <td>${n[e].published}</td>\n        <td>${n[e].created}</td>\n        <td>${n[e].modified}</td>\n      </tr>`;i=`<div class="card">\n      <div class="card-header clearfix">\n        <h2 class="h3 float-left">Articles</h2>\n        <div class="float-right">\n          <a href="#create" class="btn btn-primary">New Article</a>\n        </div>\n      </div>\n      <div class="table-responsive">\n        <table class="table table-striped table-hover table-bordered">\n          <thead>\n            <tr>\n              <td>Title</td>\n              <td>Body</td>\n              <td>Keywords</td>\n              <td>Description</td>\n              <td>Published</td>\n              <td>Created</td>\n              <td>Modified</td>\n            </tr>\n          </thead>\n          <tbody>${d}</tbody>\n        </table>\n      </div>\n    </div>`,e.innerHTML=i}}function e(e){let t=`${window.location.origin}/api/articles/${e}`,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response),i="";i=`<div class="card">\n      <div class="card-header clearfix">\n        <h2 class="h3 float-left">${t.articles.title} ${t.articles.title}</h2>\n        <div class="float-right">\n          <a href="#edit-${t.articles._id}" class="btn btn-primary">Edit</a>\n        </div>\n      </div>\n      <div class="card-body">\n        <div>${t.articles.title}</div>\n        <div>${t.articles.body}</div>\n        <div>${t.articles.keywords}</div>\n        <div>${t.articles.description}</div>\n        <div>${t.articles.published}</div>\n        <div>${t.articles.created}</div>\n        <div>${t.articles.modified}</div>\n        </div>\n    </div>`,e.innerHTML=i}}function t(e,t,n){let i=document.getElementById(e);i.addEventListener("submit",(function(e){e.preventDefault();let d=new FormData(i),a=`${window.location.origin}${t}`,s=new XMLHttpRequest;s.open(n,a),s.setRequestHeader("Content-Type","application/json; charset=UTF-8");let r={};d.forEach((function(e,t){r[t]=e})),s.send(JSON.stringify(r)),s.onload=function(){!0===JSON.parse(s.response).success?window.location.href="/":document.getElementById("formMsg").style.display="block"}}))}return{load:function(){let n=window.location.hash.split("-");switch(n[0]){case"#create":createArticles(),t("createArticle","/api/articles","POST");break;case"#view":e(n[1]);break;case"#edit":editArticles(n[1]);break;case"#delete":!function(e){let t=`${window.location.origin}/api/articles/${e}`,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response),i="";i=`<div class="card bg-transparent border-danger text-danger bg-danger">\n      <div class="card-header bg-transparent border-danger">\n        <h2 class="h3 text-center">Your About to Delete an Article</h2>\n      </div>\n      <div class="card-body text-center">\n        <div>\n          Are you sure you want to delete\n          <strong>${t.articles.title}</strong>\n        </div>\n\n        <div>Title: <strong>${t.articles.body}</strong></div>\n        <div>Keywords: <strong>${t.articles.keywords}</strong></div>\n        <div>Description: <strong>${t.articles.description}</strong></div>\n        <div>Published: <strong>${t.articles.published}</strong></div>\n        <div>Created: <strong>${t.articles.created}</strong></div>\n        <div>Modified: <strong>${t.articles.modified}</strong></div>\n\n        <div class="text-center">\n          <br>\n          <a onclick="articlessApp.deleteArticle('${t.articles._id}');" class="btn btn-lg btn-danger text-white">\n          Yes delete ${t.articles.title}</a>\n          </div>\n\n      </div>\n    </div>`,e.innerHTML=i}}(n[1]);break;default:e()}},deleteArticle:function(e){deleteArticle(e)}}}();articlesApp.load(),window.addEventListener("hashchange",(function(){articlesApp.load()}));